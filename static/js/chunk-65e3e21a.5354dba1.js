(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65e3e21a"],{4847:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return f}));a("96cf");var r=a("1da1"),n=a("7424"),o=a("b775");function i(e){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["MENU"]+"/tree",o["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["MENU"],o["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["MENU"],o["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["MENU"]+"/".concat(t),o["a"].DELETE));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["MENU"]+"/batch",o["a"].DELETE,{ids:t}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},"57d7":function(e,t,a){"use strict";var r=a("8068"),n=a.n(r);n.a},6675:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("div",{},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",{staticClass:"fold"},[a("a-row",[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"菜单名称",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入","allow-clear":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadData(t)}},model:{value:e.queryParam.menuName,callback:function(t){e.$set(e.queryParam,"menuName",t)},expression:"queryParam.menuName"}})],1)],1)],1)],1),a("span",{staticStyle:{float:"right","margin-top":"3px"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("重置")])],1)])],1),a("div",[a("a-space",{staticClass:"operator"},[a("a-button",{attrs:{type:"primary"},on:{click:e.toAdd}},[e._v("新建")]),a("a-button",{directives:[{name:"auth",rawName:"v-auth",value:"system:delete",expression:"'system:delete'"}],attrs:{disabled:0===e.selectedRowKeys.length},on:{click:e.onDeleteBatch}},[e._v("批量删除")])],1),a("a-table",{attrs:{loading:e.loading,columns:e.columns,"data-source":e.data,"row-key":function(e){return e.id},"row-selection":e.rowSelection,"default-expand-all-rows":!0,pagination:e.pagination},on:{change:e.handlePageChange},scopedSlots:e._u([{key:"icon",fn:function(e){return[a("a-icon",{attrs:{type:e}})]}},{key:"type",fn:function(t){return[a("a-tag",{attrs:{color:2===t?"pink":"blue"}},[e._v(" "+e._s(0===t?"目录":1===t?"菜单":"按钮")+" ")])]}},{key:"enabled",fn:function(t){return[a("a-tag",{attrs:{color:t?"blue":"pink"}},[e._v(" "+e._s(t?"显示":"隐藏")+" ")])]}},{key:"operation",fn:function(t,r){return[a("a-button",{staticClass:"mgr12",attrs:{size:"small"},on:{click:function(t){return e.toUpdate(r)}}},[e._v("编辑")]),a("a-popconfirm",{attrs:{title:"是否确认删除?"},on:{confirm:function(){return e.onDelete(r.id)}}},[a("a-button",{directives:[{name:"auth",rawName:"v-auth",value:"system:delete",expression:"'system:delete'"}],attrs:{size:"small"}},[e._v("删除")])],1)]}}])})],1),a("menu-form",{ref:"form",on:{change:e.onFormChange}})],1)},n=[],o=(a("a15b"),a("5530")),i=(a("96cf"),a("1da1")),s=a("4847"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,width:720,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[a("div",[a("a-form-model",{ref:"editForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"菜单类型",prop:"type"}},[a("a-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("a-radio",{attrs:{value:0}},[e._v(" 目录 ")]),a("a-radio",{attrs:{value:1}},[e._v(" 菜单 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 按钮/权限 ")])],1)],1),a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:0!==e.form.type,expression:"form.type !== 0"}],attrs:{label:"上级菜单",prop:"parentId"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeData,"replace-fields":{children:"children",title:"menuName",key:"id",value:"id"},placeholder:"请选择","tree-default-expand-all":""},scopedSlots:e._u([{key:"title",fn:function(t){var r=t.key;return"01231231"===r?a("span",{staticStyle:{color:"#08c"}},[e._v(" 根节点 ")]):e._e()}}],null,!0),model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),a("a-form-model-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("a-input",{model:{value:e.form.menuName,callback:function(t){e.$set(e.form,"menuName",t)},expression:"form.menuName"}})],1),a("a-form-model-item",{attrs:{label:"路由名称",prop:"routerName"}},[a("a-input",{model:{value:e.form.routerName,callback:function(t){e.$set(e.form,"routerName",t)},expression:"form.routerName"}})],1),a("a-form-model-item",{attrs:{label:"权限标识"}},[a("a-input",{model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1),a("a-form-model-item",{attrs:{label:"图标"}},[a("a-input",{attrs:{placeholder:"andv图标"},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),a("a-form-model-item",{attrs:{label:"状态",prop:"enabled"}},[a("a-switch",{attrs:{"checked-children":"显示","un-checked-children":"隐藏"},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}})],1),a("a-form-model-item",{attrs:{label:"打开方式",prop:"target"}},[a("a-radio-group",{model:{value:e.form.target,callback:function(t){e.$set(e.form,"target",t)},expression:"form.target"}},[a("a-radio",{attrs:{value:0}},[e._v(" 内部页面 ")]),a("a-radio",{attrs:{value:1}},[e._v(" 外部链接 ")])],1)],1),a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:1===e.form.target,expression:"form.target === 1"}],attrs:{label:"链接地址"}},[a("a-input",{model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),a("a-form-model-item",{attrs:{label:"序号",prop:"seq"}},[a("a-input-number",{model:{value:e.form.seq,callback:function(t){e.$set(e.form,"seq",t)},expression:"form.seq"}})],1)],1),a("div",{staticClass:"drawer-form-button-group"},[a("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消 ")]),a("a-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.onSubmit}},[e._v(" 提交 ")])],1)],1)])},c=[],l=(a("99af"),{name:"Edit",data:function(){return{title:"新增菜单",visible:!1,isAdd:!1,submitLoading:!1,treeData:[],form:{id:null,type:0,target:0,menuName:"",routerName:"",path:"",permission:"",icon:"",enabled:!0,seq:0,parentId:1e15},formDefault:{},rules:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],enabled:[{required:!0,message:"请选择状态",trigger:"blur"}],routerName:[{required:!0,message:"请输入路由名称",trigger:"blur"}],target:[{required:!0,message:"请选择打开方式",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],seq:[{required:!0,message:"请输入序号",trigger:"blur"}]},labelCol:{span:4},wrapperCol:{span:14}}},mounted:function(){this.formDefault=JSON.parse(JSON.stringify(this.form)),this.loadMenuData()},methods:{add:function(){this.loadMenuData(),this.title="新增菜单",this.form=Object.assign({},this.formDefault),this.isAdd=!0,this.show()},update:function(e){this.loadMenuData(),this.title="编辑菜单",this.isAdd=!1,this.form=Object.assign({},e),this.show()},show:function(){this.visible=!0},onClose:function(){this.visible=!1},onSubmit:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=15;break}if(e.submitLoading=!0,!e.isAdd){t.next=8;break}return t.next=5,Object(s["a"])(e.form);case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,Object(s["e"])(e.form);case 10:r=t.sent;case 11:e.submitLoading=!1,"SUCCESS"===r.data.code?(e.$emit("change",e.form),e.onClose()):e.$message.error(r.data.message),t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},loadMenuData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[{id:1e15,menuName:"请选择",children:null}],t.next=3,Object(s["b"])({pageSize:99999});case 3:r=t.sent,"SUCCESS"===r.data.code?(a=a.concat(r.data.result.data),e.treeData=a):e.$message.error("菜单树加载失败："+r.data.message);case 5:case"end":return t.stop()}}),t)})))()}}}),m=l,d=a("0c7c"),p=Object(d["a"])(m,u,c,!1,null,"4913b4de",null),f=p.exports,b=[{title:"菜单名称",dataIndex:"menuName"},{title:"路由名称",dataIndex:"routerName"},{title:"权限标识",dataIndex:"permission"},{title:"图标",dataIndex:"icon",scopedSlots:{customRender:"icon"}},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"启用",dataIndex:"enabled",scopedSlots:{customRender:"enabled"}},{title:"顺序",dataIndex:"seq"},{title:"操作",dataIndex:"id",scopedSlots:{customRender:"operation"}}],h={name:"index",components:{MenuForm:f},data:function(){return{loading:!1,queryParam:{menuName:"",pageSize:999},pagination:{},data:[],columns:b,selectedRowKeys:[]}},computed:{rowSelection:function(){var e=this;return{onChange:function(t){e.selectedRowKeys=t}}}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(s["b"])(e.queryParam);case 3:a=t.sent,"SUCCESS"===a.data.code?(e.data=a.data.result.data,e.pagination=a.data.result.page):e.$message.error(a.data.message),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},search:function(){this.queryParam.pageIndex=1,this.loadData()},handlePageChange:function(e,t,a){var r=Object(o["a"])({},this.pagination);r.current=e.current,this.pagination=r,this.fetch(Object(o["a"])({results:e.pageSize,page:e.current,sortField:a.field,sortOrder:a.order},t))},toAdd:function(){this.$refs.form.add()},toUpdate:function(e){this.$refs.form.update(e)},onDelete:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["c"])(e);case 2:if(r=a.sent,"SUCCESS"!==r.data.code){a.next=8;break}return a.next=6,t.loadData();case 6:a.next=9;break;case 8:t.$message.error(r.data.message);case 9:case"end":return a.stop()}}),a)})))()},onDeleteBatch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])(e.selectedRowKeys.join(","));case 2:if(a=t.sent,"SUCCESS"!==a.data.code){t.next=9;break}return e.selectedRowKeys=[],t.next=7,e.loadData();case 7:t.next=10;break;case 9:e.$message.error(a.data.message);case 10:case"end":return t.stop()}}),t)})))()},onFormChange:function(){this.loadData()}}},g=h,v=(a("57d7"),Object(d["a"])(g,r,n,!1,null,"267cb6ce",null));t["default"]=v.exports},8068:function(e,t,a){}}]);