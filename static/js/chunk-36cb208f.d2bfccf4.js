(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36cb208f"],{"2c1d":function(e,t,a){},"6a85":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return f}));a("96cf");var r=a("1da1"),n=a("7424"),o=a("b775");function s(e){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["DEPT"],o["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function c(e){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["DEPT"],o["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["DEPT"],o["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["DEPT"]+"/".concat(t),o["a"].DELETE));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])(n["DEPT"]+"/batch",o["a"].DELETE,{ids:t}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},"84d6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("div",{},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",{staticClass:"fold"},[a("a-row",[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"部门名称",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入","allow-clear":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadData(t)}},model:{value:e.queryParam.deptName,callback:function(t){e.$set(e.queryParam,"deptName",t)},expression:"queryParam.deptName"}})],1)],1)],1)],1),a("span",{staticStyle:{float:"right","margin-top":"3px"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("重置")])],1)])],1),a("div",[a("a-space",{staticClass:"operator"},[a("a-button",{attrs:{type:"primary"},on:{click:e.toAdd}},[e._v("新建")]),a("a-button",{directives:[{name:"auth",rawName:"v-auth",value:"system:delete",expression:"'system:delete'"}],attrs:{disabled:0===e.selectedRowKeys.length},on:{click:e.onDeleteBatch}},[e._v("批量删除")])],1),a("a-table",{attrs:{loading:e.loading,columns:e.columns,"data-source":e.data,"row-key":function(e){return e.id},"row-selection":e.rowSelection,"default-expand-all-rows":!0},scopedSlots:e._u([{key:"enabled",fn:function(t){return[a("a-tag",{attrs:{color:t?"blue":"pink"}},[e._v(" "+e._s(t?"显示":"隐藏")+" ")])]}},{key:"operation",fn:function(t,r){return[a("a-button",{staticClass:"mgr12",attrs:{size:"small"},on:{click:function(t){return e.toUpdate(r)}}},[e._v("编辑")]),a("a-popconfirm",{attrs:{title:"是否确认删除?"},on:{confirm:function(){return e.onDelete(r.id)}}},[a("a-button",{directives:[{name:"auth",rawName:"v-auth",value:"system:delete",expression:"'system:delete'"}],attrs:{size:"small"}},[e._v("删除")])],1)]}}])})],1),a("edit-form",{ref:"form",on:{change:e.onFormChange}})],1)},n=[],o=(a("a15b"),a("96cf"),a("1da1")),s=a("6a85"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,width:720,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[a("div",[a("a-form-model",{ref:"editForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"上级部门",prop:"parentId"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeData,"replace-fields":{children:"children",title:"deptName",key:"id",value:"id"},placeholder:"请选择","tree-default-expand-all":""},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),a("a-form-model-item",{attrs:{label:"部门名称",prop:"deptName"}},[a("a-input",{model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}})],1),a("a-form-model-item",{attrs:{label:"负责人",prop:"leader"}},[a("a-input",{model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}})],1),a("a-form-model-item",{attrs:{label:"联系方式",prop:"contact"}},[a("a-input",{model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1),a("a-form-model-item",{attrs:{label:"状态",prop:"enabled"}},[a("a-switch",{attrs:{"checked-children":"显示","un-checked-children":"隐藏"},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}})],1),a("a-form-model-item",{attrs:{label:"序号",prop:"seq"}},[a("a-input-number",{model:{value:e.form.seq,callback:function(t){e.$set(e.form,"seq",t)},expression:"form.seq"}})],1)],1),a("div",{staticClass:"drawer-form-button-group"},[a("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消 ")]),a("a-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.onSubmit}},[e._v(" 提交 ")])],1)],1)])},c=[],u=(a("99af"),{name:"Edit",data:function(){return{title:"新增部门",visible:!1,isAdd:!1,submitLoading:!1,treeData:[],form:{id:null,parentId:0,deptName:"",leader:"",contact:"",enabled:!0,seq:0},formDefault:{},rules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],enabled:[{required:!0,message:"请选择状态",trigger:"blur"}],seq:[{required:!0,message:"请输入序号",trigger:"blur"}]},labelCol:{span:4},wrapperCol:{span:14}}},mounted:function(){this.formDefault=JSON.parse(JSON.stringify(this.form)),this.loadMenuData()},methods:{add:function(){this.loadMenuData(),this.title="新增部门",this.form=Object.assign({},this.formDefault),this.isAdd=!0,this.show()},update:function(e){this.loadMenuData(),this.title="编辑部门",this.isAdd=!1,this.form=Object.assign({},e),this.show()},show:function(){this.visible=!0},onClose:function(){this.visible=!1},onSubmit:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=15;break}if(e.submitLoading=!0,!e.isAdd){t.next=8;break}return t.next=5,Object(s["a"])(e.form);case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,Object(s["e"])(e.form);case 10:r=t.sent;case 11:e.submitLoading=!1,"SUCCESS"===r.data.code?(e.$emit("change",e.form),e.onClose()):e.$message.error(r.data.message),t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},loadMenuData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[{id:0,deptName:"请选择",children:null}],t.next=3,Object(s["b"])({pageSize:99999});case 3:r=t.sent,"SUCCESS"===r.data.code?(a=a.concat(r.data.result.data),e.treeData=a):e.$message.error("部门树加载失败："+r.data.message);case 5:case"end":return t.stop()}}),t)})))()}}}),l=u,d=a("0c7c"),m=Object(d["a"])(l,i,c,!1,null,"2354177e",null),p=m.exports,f=[{title:"部门名称",dataIndex:"deptName"},{title:"负责人",dataIndex:"leader"},{title:"联系方式",dataIndex:"contact"},{title:"启用",dataIndex:"enabled",scopedSlots:{customRender:"enabled"}},{title:"顺序",dataIndex:"seq"},{title:"操作",dataIndex:"id",scopedSlots:{customRender:"operation"}}],b={name:"index",components:{EditForm:p},data:function(){return{loading:!1,queryParam:{deptName:"",pageSize:999},data:[],columns:f,selectedRowKeys:[]}},computed:{rowSelection:function(){var e=this;return{onChange:function(t){e.selectedRowKeys=t}}}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(s["b"])(e.queryParam);case 3:a=t.sent,"SUCCESS"===a.data.code?e.data=a.data.result.data:e.$message.error(a.data.message),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},search:function(){this.queryParam.pageIndex=1,this.loadData()},toAdd:function(){this.$refs.form.add()},toUpdate:function(e){this.$refs.form.update(e)},onDelete:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["c"])(e);case 2:if(r=a.sent,"SUCCESS"!==r.data.code){a.next=8;break}return a.next=6,t.loadData();case 6:a.next=9;break;case 8:t.$message.error(r.data.message);case 9:case"end":return a.stop()}}),a)})))()},onDeleteBatch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])(e.selectedRowKeys.join(","));case 2:if(a=t.sent,"SUCCESS"!==a.data.code){t.next=9;break}return e.selectedRowKeys=[],t.next=7,e.loadData();case 7:t.next=10;break;case 9:e.$message.error(a.data.message);case 10:case"end":return t.stop()}}),t)})))()},onFormChange:function(){this.loadData()}}},h=b,g=(a("bc68"),Object(d["a"])(h,r,n,!1,null,"7624fc2e",null));t["default"]=g.exports},bc68:function(e,t,a){"use strict";var r=a("2c1d"),n=a.n(r);n.a}}]);