(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86c33efa"],{"089a":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",[r("div",{},[r("a-form",{attrs:{layout:"horizontal"}},[r("div",{staticClass:"fold"},[r("a-row",[r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"角色名称",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[r("a-input",{attrs:{placeholder:"请输入","allow-clear":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadData(t)}},model:{value:e.queryParam.roleName,callback:function(t){e.$set(e.queryParam,"roleName",t)},expression:"queryParam.roleName"}})],1)],1)],1)],1),r("span",{staticStyle:{float:"right","margin-top":"3px"}},[r("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),r("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("重置")])],1)])],1),r("div",[r("a-space",{staticClass:"operator"},[r("a-button",{attrs:{type:"primary"},on:{click:e.toAdd}},[e._v("新建")]),r("a-button",{directives:[{name:"auth",rawName:"v-auth",value:"system:delete",expression:"'system:delete'"}],attrs:{disabled:0===e.selectedRowKeys.length},on:{click:e.onDeleteBatch}},[e._v("批量删除")])],1),r("a-table",{attrs:{loading:e.loading,columns:e.columns,"data-source":e.data,"row-key":function(e){return e.id},"row-selection":e.rowSelection,pagination:e.pagination},on:{change:e.handlePageChange},scopedSlots:e._u([{key:"enabled",fn:function(t){return[r("a-tag",{attrs:{color:t?"blue":"pink"},domProps:{textContent:e._s(e.dictItemAction("enabled",t))}})]}},{key:"operation",fn:function(t,n){return[r("a-button",{staticClass:"mgr12",attrs:{size:"small"},on:{click:function(t){return e.toUpdate(n)}}},[e._v("编辑")]),r("a-popconfirm",{attrs:{title:"是否确认删除?"},on:{confirm:function(){return e.onDelete(n.id)}}},[r("a-button",{directives:[{name:"auth",rawName:"v-auth",value:"system:delete",expression:"'system:delete'"}],attrs:{size:"small"}},[e._v("删除")])],1)]}}])})],1),r("edit-form",{ref:"form",on:{change:e.onFormChange}})],1)},a=[],i=(r("a15b"),r("96cf"),r("1da1")),u=r("d378"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-drawer",{attrs:{title:e.title,width:720,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[r("div",[r("a-form-model",{ref:"editForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("a-input",{model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),r("a-form-model-item",{attrs:{label:"角色编码",prop:"roleCode"}},[r("a-input",{model:{value:e.form.roleCode,callback:function(t){e.$set(e.form,"roleCode",t)},expression:"form.roleCode"}})],1),r("a-form-model-item",{attrs:{label:"状态",prop:"enabled"}},[r("a-switch",{attrs:{"checked-children":"显示","un-checked-children":"隐藏"},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}})],1),r("a-form-model-item",{attrs:{label:"配置权限",prop:"menuIds"}},[r("a-button",{staticClass:"mgr12",attrs:{type:"default",size:"small"},on:{click:e.checkAll}},[e._v("全选")]),r("a-button",{attrs:{type:"default",size:"small"},on:{click:e.unCheckAll}},[e._v("全不选")]),r("a-tree",{attrs:{checkable:"",checkStrictly:"",selectable:!1,"tree-data":e.treeData,"replace-fields":{children:"children",title:"menuName",key:"id"}},on:{check:e.onTreeCheck},model:{value:e.form.menuIds,callback:function(t){e.$set(e.form,"menuIds",t)},expression:"form.menuIds"}})],1)],1),r("div",{staticClass:"drawer-form-button-group"},[r("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消 ")]),r("a-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.onSubmit}},[e._v(" 提交 ")])],1)],1)])},o=[],s=(r("4160"),r("caad"),r("2532"),r("159b"),r("4847")),l={name:"Edit",data:function(){return{title:"新增角色",visible:!1,isAdd:!1,submitLoading:!1,treeData:[],form:{id:null,roleName:"",roleCode:"",enabled:!0,menuIds:[]},formDefault:{},rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],enabled:[{required:!0,message:"请选择状态",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"}]},labelCol:{span:4},wrapperCol:{span:14}}},mounted:function(){this.formDefault=JSON.parse(JSON.stringify(this.form)),this.loadMenuData()},methods:{add:function(){this.title="新增角色",this.form=Object.assign({},this.formDefault),this.isAdd=!0,this.show()},update:function(e){this.title="编辑角色",this.isAdd=!1,this.form=Object.assign({},e),this.show()},show:function(){this.visible=!0},onClose:function(){this.visible=!1},onSubmit:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=15;break}if(e.submitLoading=!0,!e.isAdd){t.next=8;break}return t.next=5,Object(u["a"])(e.form);case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,Object(u["e"])(e.form);case 10:n=t.sent;case 11:e.submitLoading=!1,"SUCCESS"===n.data.code?(e.$emit("change",e.form),e.onClose()):e.$message.error(n.data.message),t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},loadMenuData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["b"])({pageSize:99999});case 2:r=t.sent,"SUCCESS"===r.data.code?e.treeData=r.data.result.data:e.$message.error("菜单树加载失败："+r.data.message);case 4:case"end":return t.stop()}}),t)})))()},onTreeCheck:function(e){this.form.menuIds=e.checked},checkAll:function(){this.checkTreeData(this.treeData)},unCheckAll:function(){this.form.menuIds=[]},checkTreeData:function(e){var t=this;e.forEach((function(e){var r=e.id;t.form.menuIds.includes(r)||t.form.menuIds.push(r),e.children&&t.checkTreeData(e.children)}))}}},p=l,d=r("0c7c"),f=Object(d["a"])(p,c,o,!1,null,"12811406",null),m=f.exports,h=r("4ece"),b=[{title:"角色名称",dataIndex:"roleName"},{title:"角色编码",dataIndex:"roleCode"},{title:"启用",dataIndex:"enabled",scopedSlots:{customRender:"enabled"}},{title:"操作",dataIndex:"id",scopedSlots:{customRender:"operation"}}],g={name:"index",components:{EditForm:m},mixins:[h["a"]],data:function(){var e=this;return{loading:!1,queryParam:{roleName:""},pagination:{current:1,total:20,pageSize:20,showTotal:function(e){return"共 ".concat(e," 条数据")},showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],onShowSizeChange:function(t,r){return e.pagination.pageSize=r}},data:[],columns:b,selectedRowKeys:[]}},computed:{rowSelection:function(){var e=this;return{onChange:function(t){e.selectedRowKeys=t}}}},mounted:function(){this.loadDict("enabled"),this.loadData()},methods:{loadData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.queryParam.pageSize=e.pagination.pageSize,t.next=4,Object(u["b"])(e.queryParam);case 4:r=t.sent,"SUCCESS"===r.data.code?(e.data=r.data.result.data,n=r.data.result.page,e.pagination.current=n.pageIndex,e.pagination.total=n.totalCount):e.$message.error(r.data.message),e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},search:function(){this.queryParam.pageIndex=1,this.loadData()},handlePageChange:function(e){this.queryParam.pageIndex=e.current,this.loadData()},toAdd:function(){this.$refs.form.add()},toUpdate:function(e){this.$refs.form.update(e)},onDelete:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["c"])(e);case 2:if(n=r.sent,"SUCCESS"!==n.data.code){r.next=8;break}return r.next=6,t.loadData();case 6:r.next=9;break;case 8:t.$message.error(n.data.message);case 9:case"end":return r.stop()}}),r)})))()},onDeleteBatch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["d"])(e.selectedRowKeys.join(","));case 2:if(r=t.sent,"SUCCESS"!==r.data.code){t.next=9;break}return e.selectedRowKeys=[],t.next=7,e.loadData();case 7:t.next=10;break;case 9:e.$message.error(r.data.message);case 10:case"end":return t.stop()}}),t)})))()},onFormChange:function(){this.loadData()}}},w=g,v=(r("8469"),Object(d["a"])(w,n,a,!1,null,"183dc297",null));t["default"]=v.exports},4847:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return m}));r("96cf");var n=r("1da1"),a=r("7424"),i=r("b775");function u(e){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["MENU"]+"/tree",i["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["MENU"],i["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["MENU"],i["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["MENU"]+"/".concat(t),i["a"].DELETE));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return h=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["MENU"]+"/batch",i["a"].DELETE,{ids:t}));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}},"4ece":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r("4de4");var n=r("b85c"),a=(r("96cf"),r("1da1")),i=r("f60a"),u={data:function(){return{}},computed:{},mounted:function(){},methods:{dictItemAction:function(e,t){var r=this.genDictKey(e),n=this[r]&&this[r].filter((function(e){return e.itemCode===t+""}));return n&&n[0]&&n[0].itemName},dictAction:function(e){var t=this.genDictKey(e);return this[t]},loadDict:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,u,c,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e instanceof Array||(e=[e]),a=Object(n["a"])(e),r.prev=2,a.s();case 4:if((u=a.n()).done){r.next=12;break}return c=u.value,r.next=8,Object(i["d"])(c);case 8:o=r.sent,"SUCCESS"===o.data.code&&(s=t.genDictKey(c),t[s]=o.data.result.data);case 10:r.next=4;break;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](2),a.e(r.t0);case 17:return r.prev=17,a.f(),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[2,14,17,20]])})))()},genDictKey:function(e){return"".concat(e,"Options")}}}},"5c00":function(e,t,r){},8469:function(e,t,r){"use strict";var n=r("5c00"),a=r.n(n);a.a},d378:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return m}));r("96cf");var n=r("1da1"),a=r("7424"),i=r("b775");function u(e){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["ROLE"],i["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["ROLE"],i["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["ROLE"],i["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["ROLE"]+"/".concat(t),i["a"].DELETE));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return h=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["ROLE"]+"/batch",i["a"].DELETE,{ids:t}));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}},f60a:function(e,t,r){"use strict";r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return o})),r.d(t,"j",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return m})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return w})),r.d(t,"b",(function(){return y})),r.d(t,"k",(function(){return O})),r.d(t,"i",(function(){return R})),r.d(t,"h",(function(){return C}));r("99af"),r("96cf");var n=r("1da1"),a=r("7424"),i=r("b775");function u(e){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT"],i["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT"],i["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT"],i["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT"]+"/".concat(t),i["a"].DELETE));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return h=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT"]+"/batch",i["a"].DELETE,{ids:t}));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return g=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT"]+"/list/".concat(t),i["a"].GET));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function w(e){return v.apply(this,arguments)}function v(){return v=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT_ITEM"],i["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return k=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT_ITEM"],i["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function O(e){return x.apply(this,arguments)}function x(){return x=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT_ITEM"],i["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function R(e){return j.apply(this,arguments)}function j(){return j=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT_ITEM"]+"/".concat(t),i["a"].DELETE));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function C(e){return E.apply(this,arguments)}function E(){return E=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DICT_ITEM"]+"/batch",i["a"].DELETE,{ids:t}));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}}}]);